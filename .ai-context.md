# AI Coding Instructions for LabelGen

You are an expert full-stack engineer building LabelGen, an inventory management system for warehouse barcode scanning and label printing.

## ğŸ¯ Project Context

**Purpose:** Transform bulk barcode scans into sequential serial numbers and route print jobs to local hardware.

**Key Users:** Warehouse workers using barcode scanners in a hands-free workflow.

**Critical Requirement:** All scanning interfaces must work WITHOUT touching keyboard/mouse.

## ğŸ—ï¸ Architecture Overview

- **Backend:** Django 5.x with SQLite (local/dev)
- **Frontend:** Django Templates + Vanilla JavaScript + Bulma.io CSS
- **Print Bridge:** Go binary running on `localhost:5000`
- **Printer Format:** TBD - pending client confirmation (likely ZPL for Zebra)

## ğŸ“Š Data Model

### Product
- `PartNumber` (PK, string) - Format: `XXX-XXXX` (e.g., `232-9983`)
- `UPC` (nullable, string) - 12 digits when present

### SerialNumber
- `SerialNumber` (PK, string) - Configurable digit count (default 6), leading zeros preserved
- `PartNumber` (FK â†’ Product)
- `UPC` (nullable, denormalized from Product for fast label printing)
- `CreatedAt` (datetime)

### Config (for settings)
- `serial_start` (int) - Default: 500 (becomes `000500` with 6 digits)
- `serial_digits` (int) - Default: 6 (can be 10, 12, etc.)
- `current_serial` (int) - Auto-incrementing counter

## ğŸ”„ Core Workflows

### 1. Bulk Serial Generation
**Input:** Alternating Part/Qty barcode scans
```
232-9983  â† Part Number scan
12        â† Quantity scan
243-0012  â† Part Number scan
1         â† Quantity scan
```

**Process:**
1. Pair consecutive scans (Part â†’ Qty)
2. For each pair:
   - Look up or create Product record
   - Generate N sequential serial numbers
   - Create SerialNumber records with denormalized UPC
3. Generate print commands for inventory labels (serial only)
4. Send to Go bridge

**UI Requirement:** Dynamic table rows with auto-focus chain. When Qty field filled, auto-add new row and focus Part field.

### 2. Box Label (Shipping)
**Input:** Single serial number scan
**Output:** Label with Serial + Part + UPC (omit UPC if null)

### 3. Serial Reprint
**Input:** Serial number lookup
**Output:** Inventory label (serial only)

## ğŸ¨ UI/UX Principles

- **Hands-Free First:** Workers use barcode scanners, not keyboards
- **Auto-Focus Chain:** Fields auto-advance on barcode scan completion
- **Dynamic Forms:** Rows appear as needed (no manual "Add Row" button)
- **Large Inputs:** Bulma `is-large` for all scan fields
- **Visual Feedback:** Clear success/error states with color and notifications
- **Industrial Design:** Clean, high-contrast, warehouse-appropriate styling

## ğŸš« Constraints & Guidelines

### Keep it Simple
- Use Django's built-in features (Class-Based Views, Admin) before third-party libraries
- No frontend frameworks (React/Vue) - Vanilla JS only
- Prefer server-side rendering over complex client-side state

### Hardware-First
- All printing via raw command strings (not PDF/images)
- Printer selection stored in browser `localStorage`
- Handle CORS for `localhost` Go bridge calls

### Error Handling Priority
1. Invalid barcode format â†’ Visual + audio alert
2. Go bridge not running â†’ Clear instructions to start it
3. Printer not found â†’ List available printers
4. Serial not found â†’ Helpful error message

### Performance
- Serial generation must be **atomic** (use Django transaction + select_for_update)
- Batch inserts for SerialNumber creation
- Denormalize UPC to avoid joins during label printing

## ğŸ“‚ File Maintenance Requirements

Before finishing any task, update:
1. `TODO.md` - Mark completed tasks, add discovered sub-tasks
2. `REQUIREMENTS.md` - Document any spec changes or clarifications
3. Create `API_SUMMARY.md` when endpoints are built

## ğŸ§ª Testing Checklist

- [ ] Bulk scan with 10+ part/qty pairs without touching keyboard
- [ ] Serial generation with different digit counts (6, 10, 12)
- [ ] UPC upload CSV with various formats
- [ ] Box label printing with and without UPC
- [ ] Serial reprint functionality
- [ ] Error states (bad barcodes, missing serials, bridge down)

## ğŸ“ Code Style

- Django: Follow PEP 8, use class-based views where appropriate
- JavaScript: ES6+, clear variable names, minimal comments
- Templates: Semantic HTML, Bulma utility classes
- Go: Standard Go formatting, clear error messages

## ğŸ”— Key Files Reference

- `REQUIREMENTS.md` - Full specifications with Mermaid diagrams
- `TODO.md` - Implementation roadmap
- `README.md` - High-level architecture and workflows